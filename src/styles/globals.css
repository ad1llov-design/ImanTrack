@tailwind base;
@tailwind components;
@tailwind utilities;

/* ════════════════════════════════════════════════════════════════════════════
   ImanTrack Design System — Global Styles
   ════════════════════════════════════════════════════════════════════════════ */

/* ── CSS Custom Properties ─────────────────────────────────────────────────── */
:root {
  /* Surface */
  --surface-primary: #fdfcfa;
  --surface-secondary: #f5f3ef;
  --surface-card: #ffffff;
  --surface-overlay: rgba(0, 0, 0, 0.4);

  /* Text */
  --text-primary: #133d26;
  --text-secondary: #685c53;
  --text-muted: #a49584;
  --text-inverse: #fdfcfa;

  /* Borders */
  --border-default: #e0dbd4;
  --border-hover: #ccc4b8;
  --border-focus: #2d8f55;

  /* Accent */
  --accent-green: #2d8f55;
  --accent-gold: #efa213;

  /* Radius */
  --radius-sm: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.25rem;
  --radius-2xl: 1.5rem;
  --radius-full: 9999px;

  /* Transitions */
  --duration-fast: 150ms;
  --duration-base: 250ms;
  --duration-slow: 350ms;
  --ease-bounce: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
}

.dark {
  --surface-primary: #0c1a10;
  --surface-secondary: #142119;
  --surface-card: #1a2b1f;
  --surface-overlay: rgba(0, 0, 0, 0.6);

  --text-primary: #edf8f0;
  --text-secondary: #a4ddb6;
  --text-muted: #6ec48c;
  --text-inverse: #0c1a10;

  --border-default: #2a3d30;
  --border-hover: #3a5040;
  --border-focus: #40a86a;

  --accent-green: #40a86a;
  --accent-gold: #f5c02b;
}

/* ── Base reset & defaults ─────────────────────────────────────────────────── */
@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
    text-size-adjust: 100%;
  }

  body {
    @apply bg-surface-light text-neutral-900 dark:bg-surface-dark dark:text-neutral-100;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  /* Typography defaults */
  h1 { @apply text-h1 font-heading; }
  h2 { @apply text-h2 font-heading; }
  h3 { @apply text-h3 font-heading; }
  h4 { @apply text-h4 font-heading; }

  p { @apply text-body leading-relaxed; }

  /* Arabic */
  [lang="ar"], .font-arabic {
    direction: rtl;
    text-align: right;
    line-height: 1.8;
  }

  /* Focus */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500/50 ring-offset-2 ring-offset-surface-light dark:ring-offset-surface-dark;
    border-radius: var(--radius-md);
  }

  /* Selection */
  ::selection {
    @apply bg-primary-200/60 text-primary-950;
  }

  .dark ::selection {
    @apply bg-primary-800/40 text-primary-100;
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { @apply bg-transparent; }
  ::-webkit-scrollbar-thumb { @apply rounded-full bg-neutral-300 dark:bg-neutral-700; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-primary-400; }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ── Component layer ───────────────────────────────────────────────────────── */
@layer components {

  /* ── Container ─────────────────────────────────── */
  .container-app {
    @apply mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  .container-narrow {
    @apply mx-auto w-full max-w-3xl px-4 sm:px-6;
  }

  /* ── Skeleton loader ───────────────────────────── */
  .skeleton {
    @apply relative overflow-hidden rounded-xl bg-neutral-200/60 dark:bg-neutral-800/60;
  }
  .skeleton::after {
    content: "";
    @apply absolute inset-0 animate-shimmer;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.4) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
  }
  .dark .skeleton::after {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.06) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
  }

  /* ── Divider Islamic ───────────────────────────── */
  .divider-islamic {
    @apply relative my-8 flex items-center;
  }
  .divider-islamic::before,
  .divider-islamic::after {
    content: "";
    @apply flex-1 border-t border-neutral-200 dark:border-neutral-800;
  }
  .divider-islamic span {
    @apply mx-4 text-lg text-gold-500;
  }

  /* ── Glass effect ──────────────────────────────── */
  .glass {
    @apply border border-white/20 bg-white/70 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70;
  }
}

/* ── Utility layer ─────────────────────────────────────────────────────────── */
@layer utilities {
  .text-balance { text-wrap: balance; }
  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-top { padding-top: env(safe-area-inset-top); }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar { display: none; }

  /* Animate on scroll viewport trigger class */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }
  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }
}
